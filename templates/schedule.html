{% extends "base.html" %}

{% block content %}
<div class="schedule-container">
    <h2 class="schedule-title">축제 일정</h2>

    <div class="schedule-tabs">
        <button class="tab-button active" id="day1-tab">1DAY</button>
        <button class="tab-button" id="day2-tab">2DAY</button>
    </div>

    <!-- 1day 일정 -->
    <div class="schedule-day" id="day1">
        <!-- Day 1 일정 (2025년 5월 28일) -->
        <div class="schedule-item" id="item-1">
            <p class="schedule-time">11:00 ~ 18:00</p>
            <p class="schedule-detail">주간 프로그램 운영(부스 운영)</p>
        </div>
        <div class="schedule-item" id="item-2">
            <p class="schedule-time">16:00 ~ 18:00</p>
            <p class="schedule-detail">학생자치기구 출범식</p>
        </div>
        <div class="schedule-item" id="item-3">
            <p class="schedule-time">18:00 ~ 19:00</p>
            <p class="schedule-detail">개회식</p>
        </div>
        <div class="schedule-item" id="item-4">
            <p class="schedule-time">19:00 ~ 20:00</p>
            <p class="schedule-detail">초청 가수 공연 (싸이(PSY))</p>
        </div>
        <div class="schedule-item" id="item-5">
            <p class="schedule-time">20:00 ~ 20:30</p>
            <p class="schedule-detail">클리닝 타임(안전관리)</p>
        </div>
        <div class="schedule-item" id="item-6">
            <p class="schedule-time">20:30 ~ 21:00</p>
            <p class="schedule-detail">초청 가수 공연 (현서)</p>
        </div>
        <div class="schedule-item" id="item-7">
            <p class="schedule-time">21:00 ~ 21:40</p>
            <p class="schedule-detail">초청 가수 공연 (너드커넥션)</p>
        </div>
        <div class="schedule-item" id="item-8">
            <p class="schedule-time">21:40 ~ </p>
            <p class="schedule-detail">무대 정리</p>
        </div>
    </div>

    <!-- 2day 일정 -->
    <div class="schedule-day" id="day2" style="display: none;">
        <!-- Day 2 일정 (2025년 5월 29일) -->
        <div class="schedule-item" id="item-9">
            <p class="schedule-time">11:00 ~ 18:00</p>
            <p class="schedule-detail">주간 프로그램 운영 (부스 운영)</p>
        </div>
        <div class="schedule-item" id="item-10">
            <p class="schedule-time">15:00 ~ 18:00</p>
            <p class="schedule-detail">동아리 공연</p>
        </div>
        <div class="schedule-item" id="item-11">
            <p class="schedule-time">18:00 ~ 20:00</p>
            <p class="schedule-detail">향림 실루엣 가요제</p>
        </div>
        <div class="schedule-item" id="item-16">
            <p class="schedule-time">20:00 ~ 20:30</p>
            <p class="schedule-detail">댄스팀 maf, Area 061</p>
        </div>
        <div class="schedule-item" id="item-12">
            <p class="schedule-time">20:30 ~ 21:00</p>
            <p class="schedule-detail">초청 가수 공연 (백호)</p>
        </div>
        <div class="schedule-item" id="item-13">
            <p class="schedule-time">21:00 ~ 21:30</p>
            <p class="schedule-detail">초청 가수 공연 (헤이즈)</p>
        </div>
        <div class="schedule-item" id="item-14">
            <p class="schedule-time">22:00 ~ 22:40</p>
            <p class="schedule-detail">초청 가수 공연 (QWER)</p>
        </div>
        <div class="schedule-item" id="item-15">
            <p class="schedule-time">22:40 ~ </p>
            <p class="schedule-detail">폐막식</p>
        </div>
    </div>
</div>

<script>
// 일정 정보 (startTime, endTime 포함)
const schedule = [
    // 1day 일정 (2025-05-28)
    { title: "주간 프로그램 운영(부스 운영)", description: "", startTime: new Date("2025-05-28T11:00:00"), endTime: new Date("2025-05-28T18:00:00"), id: "item-1" },
    { title: "학생자치기구 출범식", description: "", startTime: new Date("2025-05-28T16:00:00"), endTime: new Date("2025-05-28T18:00:00"), id: "item-2" },
    { title: "개회식", description: "", startTime: new Date("2025-05-28T18:00:00"), endTime: new Date("2025-05-28T19:00:00"), id: "item-3" },
    { title: "초청 가수 공연 (싸이(PSY))", description: "", startTime: new Date("2025-05-28T19:00:00"), endTime: new Date("2025-05-28T20:00:00"), id: "item-4" },
    { title: "무대정리 및 안전확보", description: "", startTime: new Date("2025-05-28T20:00:00"), endTime: new Date("2025-05-28T20:30:00"), id: "item-5" },
    { title: "초청 가수 공연 (현서)", description: "", startTime: new Date("2025-05-28T20:30:00"), endTime: new Date("2025-05-28T21:00:00"), id: "item-6" },
    { title: "초청 가수 공연 (너드커넥션)", description: "", startTime: new Date("2025-05-28T21:00:00"), endTime: new Date("2025-05-28T21:40:00"), id: "item-7" },
    { title: "무대 정리", description: "", startTime: new Date("2025-05-28T21:40:00"), endTime: new Date("2025-05-28T23:59:59"), id: "item-8" },

    // 2day 일정 (2025-05-29)
    { title: "주간 프로그램 운영(부스 운영)", description: "", startTime: new Date("2025-05-29T11:00:00"), endTime: new Date("2025-05-29T18:00:00"), id: "item-9" },
    { title: "동아리 공연", description: "", startTime: new Date("2025-05-29T15:00:00"), endTime: new Date("2025-05-29T18:00:00"), id: "item-10" },
    { title: "향림 실루엣 가요제", description: "", startTime: new Date("2025-05-29T18:00:00"), endTime: new Date("2025-05-29T20:00:00"), id: "item-11" },
    { title: "초청 가수 공연 (백호)", description: "", startTime: new Date("2025-05-29T20:00:00"), endTime: new Date("2025-05-29T20:30:00"), id: "item-12" },
    { title: "초청 가수 공연 (헤이즈)", description: "", startTime: new Date("2025-05-29T20:30:00"), endTime: new Date("2025-05-29T21:20:00"), id: "item-13" },
    { title: "초청 가수 공연 (QWER)", description: "", startTime: new Date("2025-05-29T21:20:00"), endTime: new Date("2025-05-29T22:10:00"), id: "item-14" },
    { title: "폐막식", description: "", startTime: new Date("2025-05-29T22:10:00"), endTime: new Date("2025-05-29T23:59:59"), id: "item-15" }
];


// 탭 클릭 시 Day 1, Day 2 일정 표시
const day1Tab = document.getElementById("day1-tab");
const day2Tab = document.getElementById("day2-tab");
const day1Content = document.getElementById("day1");
const day2Content = document.getElementById("day2");

day1Tab.addEventListener("click", () => {
    day1Tab.classList.add("active");
    day2Tab.classList.remove("active");
    day1Content.style.display = "block";
    day2Content.style.display = "none";
});

day2Tab.addEventListener("click", () => {
    day2Tab.classList.add("active");
    day1Tab.classList.remove("active");
    day2Content.style.display = "block";
    day1Content.style.display = "none";
});

// 일정에 따라 상태 변경 (past, current, future)
function highlightCurrentEvent() {
    const now = new Date();
    schedule.forEach(event => {
        const item = document.getElementById(event.id);
        const itemText = item.querySelector(".schedule-detail");
        const currentTime = now.getTime();

        // 진행 중인 이벤트에 "진행 중" 텍스트 추가
        if (currentTime >= event.startTime.getTime() && currentTime <= event.endTime.getTime()) {
            item.classList.add("active");
            item.classList.add("highlight"); // 활성화된 항목에 highlight 클래스 추가
        } else {
            item.classList.remove("active");
            item.classList.remove("highlight"); // highlight 클래스 제거

            // "진행 중" 텍스트 제거
            if (itemText && itemText.innerHTML.includes("진행 중")) {
                itemText.innerHTML = itemText.innerHTML.replace("<span class='current-event'> 진행 중</span>", "");
            }
        }
    });
}

// 페이지 로드 후 진행 중 일정 강조
highlightCurrentEvent();

// 1분마다 업데이트
setInterval(highlightCurrentEvent, 60000);

</script>

{% endblock %}
