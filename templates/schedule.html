{% extends "base.html" %}

{% block content %}
<div class="schedule-container">
    <h2 class="schedule-title">축제 일정</h2>

    <div class="schedule-tabs">
        <button class="tab-button active" id="day1-tab">1DAY</button>
        <button class="tab-button" id="day2-tab">2DAY</button>
        <button class="tab-button" id="demo-tab">DEMO</button> <!-- 추가된 데모 버튼 -->
    </div>

    <!-- 1day 일정 -->
    <div class="schedule-day" id="day1">
        <!-- Day 1 일정 (2025년 5월 28일) -->
        <div class="schedule-item" id="item-1">
            <p class="schedule-time">10:00 ~ 19:00</p>
            <p class="schedule-detail">주간 프로그램 운영 (부스 운영 등)</p>
        </div>
        <div class="schedule-item" id="item-2">
            <p class="schedule-time">16:00 ~ 17:00</p>
            <p class="schedule-detail">축제 부스 리허설 및 안전점검</p>
        </div>
        <div class="schedule-item" id="item-3">
            <p class="schedule-time">18:00 ~ 19:00</p>
            <p class="schedule-detail">동아리 오프닝 공연</p>
        </div>
        <div class="schedule-item" id="item-4">
            <p class="schedule-time">19:00 ~ 19:30</p>
            <p class="schedule-detail">개회식</p>
        </div>
        <div class="schedule-item" id="item-5">
            <p class="schedule-time">19:30 ~ 20:30</p>
            <p class="schedule-detail">출범식</p>
        </div>
        <div class="schedule-item" id="item-6">
            <p class="schedule-time">20:30 ~ 21:00</p>
            <p class="schedule-detail">초청 가수 공연(1)</p>
        </div>
        <div class="schedule-item" id="item-7">
            <p class="schedule-time">21:00 ~ 21:30</p>
            <p class="schedule-detail">초청 가수 공연(2)</p>
        </div>
        <div class="schedule-item" id="item-8">
            <p class="schedule-time">21:30 ~ 22:00</p>
            <p class="schedule-detail">초청 가수 공연(3)</p>
        </div>
    </div>

    <!-- 2day 일정 -->
    <div class="schedule-day" id="day2" style="display: none;">
        <!-- Day 2 일정 (2025년 5월 29일) -->
        <div class="schedule-item" id="item-9">
            <p class="schedule-time">10:00 ~ 19:00</p>
            <p class="schedule-detail">주간 프로그램 운영 (부스 운영 등)</p>
        </div>
        <div class="schedule-item" id="item-10">
            <p class="schedule-time">18:00 ~ 19:00</p>
            <p class="schedule-detail">동아리 오프닝 공연</p>
        </div>
        <div class="schedule-item" id="item-11">
            <p class="schedule-time">19:00 ~ 19:30</p>
            <p class="schedule-detail">개회식</p>
        </div>
        <div class="schedule-item" id="item-12">
            <p class="schedule-time">19:30 ~ 20:00</p>
            <p class="schedule-detail">향림 가요제</p>
        </div>
        <div class="schedule-item" id="item-13">
            <p class="schedule-time">20:00 ~ 20:30</p>
            <p class="schedule-detail">장기자랑</p>
        </div>
        <div class="schedule-item" id="item-14">
            <p class="schedule-time">20:30 ~ 21:00</p>
            <p class="schedule-detail">초청 가수 공연(1)</p>
        </div>
        <div class="schedule-item" id="item-15">
            <p class="schedule-time">21:00 ~ 21:30</p>
            <p class="schedule-detail">초청 가수 공연(2)</p>
        </div>
        <div class="schedule-item" id="item-16">
            <p class="schedule-time">22:00 ~ 22:10</p>
            <p class="schedule-detail">폐막식</p>
        </div>
    </div>

    <!-- DEMO 일정 -->
    <div class="schedule-day" id="demo" style="display: none;">
        <!-- 데모용 일정들... -->
        <div class="schedule-item" id="demo-item-1">
            <p class="schedule-time">10:00 ~ 12:00</p>
            <p class="schedule-detail">데모 일정</p>
        </div>
        <div class="schedule-item" id="demo-item-2">
            <p class="schedule-time">13:00 ~ 23:59</p>
            <p class="schedule-detail">데모 일정 2</p>
        </div>
    </div>
</div>

<script>
// 일정 정보 (startTime, endTime 포함)
const schedule = [
    { title: "주간 프로그램 운영", description: "부스 운영 등", startTime: new Date("2025-05-28 10:00"), endTime: new Date("2025-05-28 19:00"), id: "item-1" },
    { title: "축제 부스 리허설 및 안전점검", description: "", startTime: new Date("2025-05-28 16:00"), endTime: new Date("2025-05-28 17:00"), id: "item-2" },
    { title: "동아리 오프닝 공연", description: "", startTime: new Date("2025-05-28 18:00"), endTime: new Date("2025-05-28 19:00"), id: "item-3" },
    { title: "개회식", description: "", startTime: new Date("2025-05-28 19:00"), endTime: new Date("2025-05-28 19:30"), id: "item-4" },
    { title: "출범식", description: "", startTime: new Date("2025-05-28 19:30"), endTime: new Date("2025-05-28 20:30"), id: "item-5" },
    { title: "초청 가수 공연(1)", description: "초청 아티스트 공연", startTime: new Date("2025-05-28 20:30"), endTime: new Date("2025-05-28 21:00"), id: "item-6" },
    { title: "초청 가수 공연(2)", description: "초청 아티스트 공연", startTime: new Date("2025-05-28 21:00"), endTime: new Date("2025-05-28 21:30"), id: "item-7" },
    { title: "초청 가수 공연(3)", description: "초청 아티스트 공연", startTime: new Date("2025-05-28 21:30"), endTime: new Date("2025-05-28 22:00"), id: "item-8" },
    { title: "데모 일정 2", description: "데모 일정 2", startTime: new Date("2025-04-16 13:00"), endTime: new Date("2025-04-16 23:59"), id: "demo-item-2" }
];

// 탭 클릭 시 Day 1, Day 2, DEMO 일정 표시
const day1Tab = document.getElementById("day1-tab");
const day2Tab = document.getElementById("day2-tab");
const demoTab = document.getElementById("demo-tab");
const day1Content = document.getElementById("day1");
const day2Content = document.getElementById("day2");
const demoContent = document.getElementById("demo");

day1Tab.addEventListener("click", () => {
    day1Tab.classList.add("active");
    day2Tab.classList.remove("active");
    demoTab.classList.remove("active");
    day1Content.style.display = "block";
    day2Content.style.display = "none";
    demoContent.style.display = "none";
});

day2Tab.addEventListener("click", () => {
    day2Tab.classList.add("active");
    day1Tab.classList.remove("active");
    demoTab.classList.remove("active");
    day2Content.style.display = "block";
    day1Content.style.display = "none";
    demoContent.style.display = "none";
});

demoTab.addEventListener("click", () => {
    demoTab.classList.add("active");
    day1Tab.classList.remove("active");
    day2Tab.classList.remove("active");
    demoContent.style.display = "block";
    day1Content.style.display = "none";
    day2Content.style.display = "none";
});

// 일정에 따라 상태 변경 (past, current, future)
function highlightCurrentEvent() {
    const now = new Date();
    schedule.forEach(event => {
        const item = document.getElementById(event.id);
        const itemText = item.querySelector(".schedule-detail");
        const currentTime = now.getTime();

        // 진행 중인 이벤트에 "진행 중" 텍스트 추가
        if (currentTime >= event.startTime.getTime() && currentTime <= event.endTime.getTime()) {
            item.classList.add("active");
            item.classList.add("highlight"); // 활성화된 항목에 highlight 클래스 추가

            // "진행 중" 텍스트 추가
            if (itemText && !itemText.innerHTML.includes("진행 중")) {
                itemText.innerHTML += "<span class='current-event'> 진행 중</span>";
            }
        } else {
            item.classList.remove("active");
            item.classList.remove("highlight"); // highlight 클래스 제거

            // "진행 중" 텍스트 제거
            if (itemText && itemText.innerHTML.includes("진행 중")) {
                itemText.innerHTML = itemText.innerHTML.replace("<span class='current-event'> 진행 중</span>", "");
            }
        }
    });
}

// 페이지 로드 후 현재 진행 중인 이벤트 강조
highlightCurrentEvent();

// 1분마다 업데이트
setInterval(highlightCurrentEvent, 60000);
</script>

{% endblock %}
